Sjasm Z80 Assembler v0.42c - www.xl2s.tk             [2016.03.05 - 11:27:45]

totalras.asm
Errors: 0

       1   00:0000                      		output "TOTALRAS.rom"
       2   00:0000                      
       3   00:0000                      		defpage	 0,0x4000, 0x2000		; page 0 main code 
       4   00:0000                      		defpage	 1,0x6000, 0x2000		; page 1 
       5   00:0000                      		defpage	 2..7					; swapped data 
       6   00:0000                      	
       7   00:0000                      		;	konami scc
       8   00:0000                      		
       9   00:0000  (00:5000)           _kBank1:	equ 05000h ;- 57FFh (5000h used)
      10   00:0000  (00:7000)           _kBank2: 	equ 07000h ;- 77FFh (7000h used)
      11   00:0000  (00:9000)           _kBank3: 	equ 09000h ;- 97FFh (9000h used)
      12   00:0000  (00:B000)           _kBank4: 	equ 0B000h ;- B7FFh (B000h used)
      13   00:0000                      	
      14   00:0000  (00)                		page 0
      15   00:4000                      		
      16   00:4000                              org 4000h
      17   00:4000                              dw  4241h,START,0,0,0,0,0,0
      17   00:4000  41 42 41 40 00 00 00 00 00 00 00 00 00 00 00 00 
      18   00:4010                      
      19   00:4010                      screeninit:
      20   00:4010  3E 08               		ld		a,8
      21   00:4012  CD 5F 00            		call	005fh		
      22   00:4015  21 00 00            		ld		hl,0h
      23   00:4018  CD 53 00            		call	0053h		
      24   00:401B                      
      25   00:401B  11 07 01            		ld		de,256*:_opening+7
      26   00:401E                      		
      27   00:401E                      outvram:
      28   00:401E  7A                  2:		ld	a,d
      29   00:401F  32 00 70            		ld	(_kBank2),a
      30   00:4022  21 00 60            		ld	hl,0x6000
      31   00:4025                      		
      32   00:4025  01 98 00            		ld	bc,0x98
      33   00:4028  3E 20               		ld	a,32
      34   00:402A  ED B3               1:		otir
      35   00:402C  3D                  		dec	a
      36   00:402D  C2 2A 40            		jp	nz,1b
      37   00:4030  14                  		inc	d
      38   00:4031  1D                  		dec	e
      39   00:4032  20 EA               		jr	nz,2b
      40   00:4034                      		
      41   00:4034  1E 2C               		ld	e,256-212
      42   00:4036  06 00               		ld	b,0
      43   00:4038  AF                  		xor	a
      44   00:4039  D3 98               1:		out	(0x98),a
      45   00:403B  10 FC               		djnz	1b
      46   00:403D  1D                  		dec	e
      47   00:403E  20 F9               		jr	nz,1b
      48   00:4040  C9                  		ret
      49   00:4041                      		
      50   00:4041                      		
      51   00:4041                      		
      52   00:4041                      		
      53   00:4041                      START:  
      54   00:4041  CD 10 40            		call	screeninit
      55   00:4044                      		
      56   00:4044  F3                  		di                
      57   00:4045  3E 97               		ld     a,#97      
      58   00:4047  D3 99               		out    (#99),a    
      59   00:4049  3E 91               		ld     a,#91      
      60   00:404B  D3 99               		out    (#99),a  
      61   00:404D  FB                  		ei
      62   00:404E                      
      63   00:404E  76                  		halt              ; allow ISR
      64   00:404F                      		
      65   00:404F  11 8E 40            		ld     	de,sintab
      66   00:4052  CD 63 40            1:   	call   	raster_wave
      67   00:4055  CD 9C 00            		call   	#009c      
      68   00:4058  28 F8               		jr     	z,1b    
      69   00:405A  13                  		inc		de
      70   00:405B  21 46 BE            		ld		hl,-(endsintab-212)
      71   00:405E  ED 5A               		adc		hl,de
      72   00:4060  20 F0               		jr		nz,1b
      73   00:4062  C9                  		ret    
      74   00:4063                      ;S#2		
      75   00:4063                      ;b6	VR: Vertical scanning line timing flag
      76   00:4063                      ;		During vertical scanning, this flag is set to 1.
      77   00:4063                      
      78   00:4063                      ;b5	HR: Horizontal scanning line timing flag
      79   00:4063                      ;		During horizontal scanning, this flag is set to 1.
      80   00:4063                             
      81   00:4063                      raster_wave:   
      82   00:4063  F3                  		di                
      83   00:4064  3E 02               		ld     a,#02      
      84   00:4066  D3 99                       out    (#99),a    
      85   00:4068  3E 8F               		ld     a,#8f      
      86   00:406A  D3 99               		out    (#99),a
      87   00:406C                      
      88   00:406C                      
      89   00:406C  0E 9B               		ld		c,0x9B
      90   00:406E                      		
      91   00:406E  DB 99               1:   	in     a,(#99)    ; wait for VR (start of the frame)
      92   00:4070  CB 77               		bit    6,a        
      93   00:4072  C2 6E 40            		jp     nz,1b
      94   00:4075                      
      95   00:4075  62                  		ld		h,d
      96   00:4076  6B                  		ld		l,e
      97   00:4077                      		
      98   00:4077  ED A3               		outi		
      99   00:4079                      .loop:		
     100   00:4079                      		
     101   00:4079  DB 99               1:   	in     a,(#99)     ; wait for HR (end of the line)
     102   00:407B  CB 6F               		bit    5,a        
     103   00:407D  28 FA               		jr     z,1b   
     104   00:407F                      
     105   00:407F  ED A3               		outi
     106   00:4081                      		
     107   00:4081  CB 77               		bit    6,a        ; wait for VR (end of the frame)
     108   00:4083  28 F4               		jr     z,.loop        
     109   00:4085                      		
     110   00:4085                      
     111   00:4085  AF                  		xor    a          
     112   00:4086  D3 99               		out    (#99),a    
     113   00:4088  3E 8F               		ld     a,#8f      
     114   00:408A  D3 99               		out    (#99),a    
     115   00:408C  FB                  		ei                
     116   00:408D  C9                  		ret
     117   00:408E                      		
     118   00:408E                                 
     119   00:408E                      
     120   00:408E                      sintab:  
     121   00:408E                      		include rast.txt
       1.  00:408E                        db  212,210,208,206,204,202,200,198,196,194,192,190,188,186,184,182,180,178,176,174,172,170,168,166,164,162,160,158,156,154,152,150,148,146,144,142,140,138,136,134,132,130,128,126,124,122,120,118,116,114,112,110,108,106,104,102,100,98,96,94,92,90,88,86,84,82,80,78,76,74,72,70,68,66,64,62,60,58,56,54,52,50,48,46,44,42,40,38,36,34,32,30,28,26,24,22,20,18,16,14,12,10,8,6,4,2,0,254,252,250,248,246,244,242,240,238,236,234,232,230,228,226,224,222,220,218,216,214,212,210,208,206,204,202,200,198,196,194,192,190,188,186,184,182,180,178,176,174,172,170,168,166,164,162,160,158,156,154,152,150,148,146,144,142,140,138,136,134,132,130,128,126,124,122,120,118,116,114,112,110,108,106,104,102,100,98,96,94,92,90,88,86,84,82,80,78,76,74,72,70,68,66,64,62,60,58,56,54,52,50,48,46,44,42,40,38,36,34,32,30,28,26,24,22,20,18,16,14,12,10,8,6,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0   
       1.  00:408E  D4 D2 D0 CE CC CA C8 C6 C4 C2 C0 BE BC BA B8 B6 
       1.  00:409E  B4 B2 B0 AE AC AA A8 A6 A4 A2 A0 9E 9C 9A 98 96 
       1.  00:40AE  94 92 90 8E 8C 8A 88 86 84 82 80 7E 7C 7A 78 76 
       1.  00:40BE  74 72 70 6E 6C 6A 68 66 64 62 60 5E 5C 5A 58 56 
       1.  00:40CE  54 52 50 4E 4C 4A 48 46 44 42 40 3E 3C 3A 38 36 
       1.  00:40DE  34 32 30 2E 2C 2A 28 26 24 22 20 1E 1C 1A 18 16 
       1.  00:40EE  14 12 10 0E 0C 0A 08 06 04 02 00 FE FC FA F8 F6 
       1.  00:40FE  F4 F2 F0 EE EC EA E8 E6 E4 E2 E0 DE DC DA D8 D6 
       1.  00:410E  D4 D2 D0 CE CC CA C8 C6 C4 C2 C0 BE BC BA B8 B6 
       1.  00:411E  B4 B2 B0 AE AC AA A8 A6 A4 A2 A0 9E 9C 9A 98 96 
       1.  00:412E  94 92 90 8E 8C 8A 88 86 84 82 80 7E 7C 7A 78 76 
       1.  00:413E  74 72 70 6E 6C 6A 68 66 64 62 60 5E 5C 5A 58 56 
       1.  00:414E  54 52 50 4E 4C 4A 48 46 44 42 40 3E 3C 3A 38 36 
       1.  00:415E  34 32 30 2E 2C 2A 28 26 24 22 20 1E 1C 1A 18 16 
       1.  00:416E  14 12 10 0E 0C 0A 08 06 04 00 00 00 00 00 00 00 
       1.  00:417E  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
       1.  00:418E  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
       1.  00:419E  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
       1.  00:41AE  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
       1.  00:41BE  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
       1.  00:41CE  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
       1.  00:41DE  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
       1.  00:41EE  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
       1.  00:41FE  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
       1.  00:420E  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
       1.  00:421E  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
       1.  00:422E  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
       1.  00:423E  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
       1.  00:424E  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
       1.  00:425E  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
       1.  00:426E  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
       1.  00:427E  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
       2.  00:428E                        
     122   00:428E                      endsintab:
     123   00:428E  (01)                		page 1
     124   01:6000                      _opening:
     125   01:6000  (2000)              		incbin "opening.bin",0x0000,0x2000
     126   01:8000  (02)                		page 2
     127   02:6000  (2000)              		incbin "opening.bin",0x2000,0x2000
     128   02:8000  (03)                		page 3
     129   03:6000  (2000)              		incbin "opening.bin",0x4000,0x2000
     130   03:8000  (04)                		page 4
     131   04:6000  (2000)              		incbin "opening.bin",0x6000,0x2000
     132   04:8000  (05)                		page 5
     133   05:6000  (2000)              		incbin "opening.bin",0x8000,0x2000
     134   05:8000  (06)                		page 6
     135   06:6000  (2000)              		incbin "opening.bin",0xA000,0x2000
     136   06:8000  (07)                		page 7
     137   07:6000  (1400)              		incbin "opening.bin",0xC000;,0x2000
     138   07:7400                      		; page 8
     139   07:7400                      		; incbin "opening.bin",0xE000;,,0x2000
     140   07:7400                      

    LABELS
-------------------------------------------------
00:00005000 X _kBank1
00:00007000   _kBank2
00:00009000 X _kBank3
00:0000B000 X _kBank4
00:00004010   screeninit
00:0000401E X outvram
00:00004041   START
00:00004063   raster_wave
00:00004079   raster_wave.loop
00:0000408E   sintab
00:0000428E   endsintab
01:00006000   _opening


 Output: totalras.out
-------------------------------------------------

 Page: 00
  Org: 00004000  Size: *  Used: 00000000

    No output

 Output: TOTALRAS.rom
-------------------------------------------------

 Page: 00
  Org: 00004000  Size: 00002000  Used: 0000028E

   Address   Length Align   Label
   00004000     654         screeninit
   0000428E    7538       <empty>

 Page: 01
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         _opening

 Page: 02
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 03
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 04
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 05
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 06
  Org: 00006000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   00006000    8192         

 Page: 07
  Org: 00006000  Size: 00002000  Used: 00001400

   Address   Length Align   Label
   00006000    5120         
   00007400    3072       <empty>
